<app-header></app-header>

<app-admin-sidebar></app-admin-sidebar>
<nav class="navbar navbar-expand-lg navbar-light bg-light" aria-label="Eighth navbar example">
  <div class="container container-bots contenedorfiltros" >
    

    <div class=" navbar" id="navbarsExample07">
      <div class="navbar-nav me-auto mb-2 mb-lg-0" style="margin-left: 3rem; gap: 2rem;">

        <div class="nav-item">
          <select name="filtros" (change)="seleccionarSpecialty($event)">
            @for(specialidad of speciality; track specialidad.id){
              <option value={{specialidad.id}}>{{specialidad.name}}</option>
            }
          </select>
        </div>

        <div class="nav-item">
          <form (ngSubmit)="burcador_nombre()">
            <div style="display: flex; justify-content: center; align-items: center;">
              <input type="text" id="texto" name="texto" [(ngModel)]="name" placeholder="Buscar por nombre">
            <button style="margin-top: 0;" type="submit">Enviar</button>
            </div>
            <!-- <label for="texto">Buscar</label> -->
            
          </form>
        </div>

        <div class="nav-item">
          <form (ngSubmit)="burcador_id()">
            <div style="display: flex; justify-content: center; align-items: center;">
              <input type="text" id="texto" name="texto" [(ngModel)]="id" placeholder="Buscar por id">
            <button style="margin-top: 0;" type="submit">Enviar</button>
            </div>
            
          </form>
        </div>       
        
      </div>
     
    </div>
    <div class="nav-item">
      <button (click)="limpiar_filtros()">Limpiar Filtros</button>
    </div>
  </div>
</nav>
<section class="container">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h3 class="card-title">Lista de Doctores</h3>
      <button type="button" class="btn btn-primary" (click)="goToCreate()">
        A&ntilde;adir un nuevo doctor
      </button>
    </div>
    <div class="card-body table-responsive">
      <table id="example1" class="table table-bordered table-striped">
        <thead>
          <tr>
            <th class="center-text">ID</th>
            <th class="center-text">Nombre</th>
            <th class="center-text">DNI</th>
            <th class="center-text">Cumplea&ntilde;os</th>
            <th class="center-text">Tel&eacute;fono</th>
            <th class="center-text">Especialidad</th>
            <th class="center-text">Estado</th>
            <th class="center-text">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let group of chunkArray(doctores, itemsPerPage); let i = index">
            <ng-container *ngIf="currentPage === i">
              <tr *ngFor="let doctor of group">
                <th class="center-text">{{ doctor.id }}</th>
                <th class="center-text">{{ doctor.name }}</th>
                <th class="center-text">{{ doctor.dni }}</th>
                <th class="center-text">{{ doctor.birthdate }}</th>
                <th class="center-text">{{ doctor.phone }}</th>
                <th class="center-text">{{ doctor.specialty.name }}</th>
                <th class="center-text">{{ doctor.user.onDutty }}</th>
                <th>
                  <button class="btn btn-primary" (click)="navigateToUpdateDoctor(doctor.id)">Editar</button>
                </th>
              </tr>
            </ng-container>
          </ng-container>
        </tbody>
      </table>
      <nav aria-label="Page navigation example" class="flex-column text-end">
        <ul class="pagination">
          <li class="page-item" [class.disabled]="currentPage === 0">
            <a class="page-link" (click)="prevPage($event)">Anterior</a>
          </li>
          <li class="page-item" *ngFor="let page of [].constructor(totalPages); let pageIndex = index" [class.active]="currentPage === pageIndex">
            <a class="page-link" (click)="setPage($event, pageIndex)">{{ pageIndex + 1 }}</a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages - 1">
            <a class="page-link" (click)="nextPage($event)">Siguiente</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</section>

<app-admin-sidebar></app-admin-sidebar>

<section class="container">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h3 class="card-title">Lista de Doctores</h3>
      <button type="button" class="btn btn-primary" (click)="goToCreate()">
        Añadir un nuevo doctor
      </button>
    </div>
    <div class="card-body">
      <table id="example1" class="table table-bordered table-striped">
        <thead>
          <tr>
            <th class="center-text">ID</th>
            <th class="center-text">Nombre</th>
            <th class="center-text">DNI</th>
            <th class="center-text">Cumpleaños</th>
            <th class="center-text">Teléfono</th>
            <th class="center-text">Especialidad</th>
            <th class="center-text">Estado</th>
            <th class="center-text">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let group of chunkArray(doctores, itemsPerPage); let i = index">
            <ng-container *ngIf="currentPage === i">
              <tr *ngFor="let doctor of group">
                <th class="center-text">{{ doctor.id }}</th>
                <th class="center-text">{{ doctor.name }}</th>
                <th class="center-text">{{ doctor.dni }}</th>
                <th class="center-text">{{ doctor.birthdate }}</th>
                <th class="center-text">{{ doctor.phone }}</th>
                <th class="center-text">{{ doctor.specialty.name }}</th>
                <th class="center-text">{{ doctor.user.onDutty }}</th>
                <th>
                  <button class="btn btn-primary" (click)="updateDoctor(doctor.id)">Editar</button>
                </th>
              </tr>
            </ng-container>
          </ng-container>
        </tbody>
      </table>
      <nav aria-label="Page navigation example" class="flex-column text-end">
        <ul class="pagination">
          <li class="page-item" [class.disabled]="currentPage === 0">
            <a class="page-link" (click)="prevPage($event)">Previous</a>
          </li>
          <li class="page-item" *ngFor="let page of [].constructor(totalPages); let pageIndex = index" [class.active]="currentPage === pageIndex">
            <a class="page-link" (click)="setPage($event, pageIndex)">{{ pageIndex + 1 }}</a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages - 1">
            <a class="page-link" (click)="nextPage($event)">Next</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</section>
